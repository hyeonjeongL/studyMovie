<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.imhj.movieCrawling.dao.MovieDao">

	<insert id="insertMovie" parameterType="com.imhj.movieCrawling.dto.MovieDto">
		INSERT INTO COLT_MOVIE(
		URL,
		MOVIE_CODE,
		REG_DT,
		UPT_DT
		) VALUES (
		#{url},
		#{movieCode},
		NOW(),
		NOW()
		)
		ON DUPLICATE KEY UPDATE
		URL = #{url},
		MOVIE_CODE = #{movieCode},
		UPT_DT = NOW()


	</insert>

	<select id="selectTest" resultType="com.imhj.movieCrawling.dto.MovieDto">
		SELECT *
		FROM COLT_MOVIE
		LIMIT 1;

	</select>

	<insert id="insertMovieEvalut" parameterType="com.imhj.movieCrawling.dto.MovieEvalutDto">

		INSERT INTO COLT_MOVIE(
		ID,
		MOVIE_INFO_ID
		AVG_POINT,
		CONTENT,
		COLLECT_DAY,
		REG_DT
		) VALUES (
		#{id},
		#{movieInfoId},
		#{avgPoint},
		#{content},
		#{collectDay},
		NOW()
		)
		ON DUPLICATE KEY UPDATE
		ID = #{id},
		MOVIE_INFO_ID = #{movieInfoId},
		AVG_POINT = #{avgPoint},
		CONTENT = #{content},
		COLLECT_DAY = #{collectDay},
		REG_DT = #{regDt}

	</insert>

	<insert id="insertMovieInfo" parameterType="com.imhj.movieCrawling.dto.MovieInfoDto">
		INSERT INTO
		MOVIEINFO(
		ID,
		MOVIECODE,
		TITLE,
		AVGPOINT,
		REGDT,
		UPTDT
		) VALUES (
		#{id},
		#{movieCode},
		#{title},
		#{avgPoint},
		NOW(),
		NOW()
		) ON DUPLICATE KEY UPDATE
		ID = #{id},
		MOVIECODE = #{movieCode},
		TITLE = #{title},
		AVGPOINT = #{avgPoint},
		UPTDT = NOW()


	</insert>

</mapper>